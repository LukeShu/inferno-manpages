.TH READ 5 "" "" "Inferno Reference "
.PP
.SH NAME
read, write \- transfer data from and to a file
.PP
.SH SYNOPSIS
.IP
.EX
Tread  tag [2] fid [2] offset [8] count [2]
Rread  tag [2] fid [2] count  [2] pad   [1] data [count]
Twrite tag [2] fid [2] offset [8] count [2] pad [1] data [count]
Rwrite tag [2] fid [2] count  [2]
.EE
.PP
.SH DESCRIPTION
.SS THE READ TRANSACTION
The read request asks for 
.I count
bytes of data from the file identified by 
.I fid
starting 
.I offset
bytes after the beginning of the file.
The 
.I fid
which must have been previously opened for reading.
The 
.I count
field must be less than or equal to MAXFDATA (8192, defined in <styx.h>).
The bytes are returned with the read reply message.
.PP
The 
.I count
field in the reply indicates the number of bytes returned.
This may be less than the requested amount.
If the 
.I offset
field is greater than the number of bytes in the file, a count of zero will be returned.
.PP
For directories, read returns an integral number of directory entries exactly as in stat (see 
.I stat
).
one for each member of the directory.
The read request message must have offset and count zero modulo DIRLEN (116, defined in <lib9.h>).
.PP
.SS THE WRITE TRANSACTION
The write request asks that 
.I count
bytes of data be recorded in the file identified by 
.I fid
starting 
.I offset
bytes after the beginning of the file.
The 
.I fid
must have been previously opened for writing.
.PP
Directories may not be written by this mechanism.
Directories are modified by create and remove requests.
See 
.I open
for a description of the create request and 
.I remove
.
.PP
The write reply reports the number of bytes actually written.
It is usually an error if this is not the same as requested.
.PP
.SH ENTRY POINTS
The read and write messages are generated by the corresponding calls (see 
.I read
).
Because of the MAXFDATA limit, more than one message may be produced by a single call.
.PP
.SH SEE ALSO
.I read
and 
.I stat
