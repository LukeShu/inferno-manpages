.TH STAT 5 "" "" "Inferno Reference "
.PP
.SH NAME
stat, wstat \- inquire or change file attributes
.PP
.SH SYNOPSIS
.IP
.EX
Tstat  tag [2] fid [2]
Rstat  tag [2] fid [2] stat [116]
Twstat tag [2] fid [2] stat [116]
Rwstat tag [2] fid [2]
.EE
.PP
.SH DESCRIPTION
.SS THE STAT TRANSACTION
The stat transaction inquires about the file identified by 
.I fid
.
The reply includes (in the 
.I stat
argument) a 
.I directory entry
containing the file\[aq]s attributes.
.PP
The stat request requires no special permissions other than those needed to acquire 
.I fid
.
.PP
.SS DIRECTORY ENTRY LAYOUT
Both the 
.I stat
and 
.I wstat
messages transmit file attributes in a machine\-independent representation called a 
.I directory entry
.
.PP
A directory entry is 116\-bytes long.
See DIRLEN in <lib9.h>.
Integers in this encoding are in little\-endian order (least significant byte first).
The convM2D and convD2M routines (see 
.I styx
) convert between directory entries and C language structures.
.PP
This encoding may be turned into a machine dependent Dir structure (see <lib9.h>) using routines defined in 
.I styx
.
.PP
A 
.I directory entry
is laid out as follows:
.PP
.TS
tab(@);
lw(35.0n) lw(35.0n).
T{
name [28]
T}@T{
File name.
If the file is the root directory of the server the name must be 
.I /
.
T}
T{
uid [28]
T}@T{
Owner name.
T}
T{
gid [28]
T}@T{
Group name.
T}
T{
qid.path [4]
T}@T{
File server\[aq]s identification for the file.
See 
.I Inferno File Protocol, Styx
.
T}
T{
qid.vers [4]
T}@T{
Version number for given path.
See 
.I Inferno File Protocol, Styx
.
T}
T{
mode [4]
T}@T{
Permissions and flags.
The 
.I mode
contains permission bits as described in 
.I Inferno Devices
and 16r80000000 if this file is a directory.
T}
T{
atime [4]
T}@T{
The last access time.
The atime field records the last read of the contents; it is also set whenever mtime is set.
.PP
For a directory, atime is set by an attach, walk, or create, all whether successful or not.
.PP
The value is measured in seconds since the epoch (Jan 1 00:00 1970 GMT).
T}
T{
mtime [4]
T}@T{
The last modification time.
The mtime field reflects the time of the last change of content.
.PP
For a plain file, mtime is the time of the most recent create, open with truncation, or write; for a directory it is the time of the most recent remove, create, or wstat of a file in the directory.
.PP
The value is measured in seconds since the epoch
.PP
(Jan 1 00:00 1970 GMT).
T}
T{
length [8]
T}@T{
Length of file in bytes.
Directories and most files representing devices have, by convention, a length of 0.
T}
T{
type [2]
T}@T{
See discussion of 
.I devtype
in 
.I Inferno File Protocol, Styx
.
T}
T{
dev [2]
T}@T{
See discussion of 
.I dev
in 
.I Inferno File Protocol, Styx
.
T}
.TE
.PP
.TS
tab(@);
l.
T{
T}
.TE
.PP
A read of a directory yields an integral number of directory entries in the machine independent encoding given above (see 
.I read
).
.PP
.SS THE WSTAT TRANSACTION
The wstat request can change certain file attributes.
.PP
.TS
tab(@);
l l.
T{
name
T}@T{
The name can be changed by anyone with write permission in the parent directory.
It is an error to change the name of a file to that of an existing file.
T}
T{
mode and mtime
T}@T{
The mode and mtime can be changed by the owner of the file.
The directory bit cannot be changed by a wstat.
All the other defined permission and mode bits can be change.
T}
T{
gid
T}@T{
The gid can be changed: by the owner if also a member of the new group.
(See 
.I Inferno File Protocol, Styx
for more information about permissions and 
.I users
for users and groups).
T}
.TE
.PP
.TS
tab(@);
l.
T{
T}
.TE
.PP
None of the other attributes can be altered by a wstat.
In particular, there is no way to change the owner of a file.
.PP
.SH ENTRY POINTS
Type stat messages are generated by the fstat and stat calls (see 
.I stat
).
.PP
.SH SEE ALSO
.I styx
, 
.I stat
, 
.I Inferno File Protocol, Styx
, and 
.I read
