.TH READ 3
.PP
.SH NAME
read, write \- transfer data from and to a file
.SH SYNOPSYS
.IP
.EX
Tread  tag [2] fid [2] offset [8] count [2]
Rread  tag [2] fid [2] count  [2] pad   [1] data [count]
Twrite tag [2] fid [2] offset [8] count [2] pad [1] 
                                           data [count]
Rwrite tag [2] fid [2] count  [2]
.EE
.PP
.SH DESCRIPTION
.SS THE READ TRANSACTION
The 
.I read
request asks for 
.I count
bytes of data from the file identified by 
.I fid
starting 
.I offset
bytes after the beginning of the file.
The 
.I fid
which must have been previously opened for reading.
The 
.I count
field must be less than or equal to 
.I MAXFDATA
(8192, defined in 
.I <styx.h>
).
The bytes are returned with the 
.I read
reply message.
.PP
The 
.I count
field in the reply indicates the number of bytes returned.
This may be less than the requested amount.
If the 
.I offset
field is greater than the number of bytes in the file, a count of zero will be returned.
.PP
For directories, 
.I read
returns an integral number of directory entries exactly as in 
.I stat
(see 
.I 
stat, wstat \- inquire or change file attributes
.I ).
one for each member of the directory.
The read request message must have 
offset
.I  and 
count
.I  zero modulo 
DIRLEN
.I  (116, defined in 
<lib9.h>
.I ).

.PP
.SS THE WRITE TRANSACTION
The 
.I write
request asks that 
.I count
bytes of data be recorded in the file identified by 
.I fid
starting 
.I offset
bytes after the beginning of the file.
The 
.I fid
must have been previously opened for writing.
.PP
Directories may not be written by this mechanism.
Directories are modified by 
.I create
and 
.I remove
requests.
(See 
.I open, create \- prepare a fid for I/O on a file
for a description of the 
.I create
request and 
.I remove \- remove a file from a server
.)
.PP
The 
.I write
reply reports the number of bytes actually written.
It is usually an error if this is not the same as requested.
.PP
.SH ENTRY POINTS
The 
.I read
and 
.I write
messages are generated by the corresponding calls (see 
.I read, write, stream \- read, write, or stream file
in Chapter 8).
Because of the 
.I MAXFDATA
limit, more than one message may be produced by a single call.
.PP
.SH SEE ALSO
.PP
.TS
tab(@);
l.
T{
.I read, write, stream \- read, write, or stream file
in Chapter 8
T}
T{

.I 
stat, wstat \- inquire or change file attributes
.I 

T}
.TE
.PP
.TS
tab(@);
l.
T{
T}
.TE
